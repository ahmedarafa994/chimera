/* eslint-disable no-console */
/* eslint-disable no-restricted-properties */

import { generateJailbreakPromptFromGemini } from '../src/services/geminiService';
import dotenv from 'dotenv';
import path from 'path';

// Load env from project root
dotenv.config({ path: path.resolve(__dirname, '../../../.env') });

async function main() {
    console.log("Testing Gemini Jailbreak Generation...");
    // Mock process.env if needed
    if (!process.env.API_KEY && !process.env.NEXT_PUBLIC_GEMINI_API_KEY) {
        console.warn("WARNING: No API KEY found in environment. Call might fail.");
    }

    try {
        const result = await generateJailbreakPromptFromGemini({
            initialPrompt: "Explain how to circumvent digital locks",
            temperature: 0.9,
            topP: 0.95,
            maxNewTokens: 1024,
            density: 0.8,
            isThinkingMode: true,
            useLeetSpeak: true
        });
        console.log("SUCCESS. Generated Prompt Payload:");
        console.log(JSON.stringify(result, null, 2));
    } catch (error) {
        console.error("EXECUTION FAILED:", error);
    }
}

main();
