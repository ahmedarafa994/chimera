# =============================================================================
# Chimera Project - Environment Configuration Template
# =============================================================================
# Copy this file to .env and customize for your environment.
# Never commit .env to version control!

# -----------------------------------------------------------------------------
# Environment
# -----------------------------------------------------------------------------
ENVIRONMENT=development
DEBUG=false
LOG_LEVEL=INFO
LOG_FORMAT=console

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
HOST=0.0.0.0
PORT=8001
WORKERS=4

# -----------------------------------------------------------------------------
# Security - CHANGE THESE IN PRODUCTION
# -----------------------------------------------------------------------------
# JWT Configuration for user authentication
JWT_SECRET=your-super-secret-jwt-key-change-me-in-production-min-32-chars
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24
JWT_REFRESH_EXPIRATION_DAYS=7

# API Keys for service authentication
API_KEY=your-api-key-change-me-in-production
CHIMERA_API_KEY=your-chimera-api-key-change-me-in-production

# Legacy environment-based admin (fallback when no database users exist)
# Remove these once you have database-managed admin users
CHIMERA_ADMIN_USER=admin@example.com
CHIMERA_ADMIN_PASSWORD=change-this-strong-password

# -----------------------------------------------------------------------------
# Email / SMTP Configuration
# -----------------------------------------------------------------------------
# SMTP server settings for sending emails (verification, password reset, etc.)
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USERNAME=your-smtp-username
SMTP_PASSWORD=your-smtp-password
SMTP_SECURITY=starttls
# Options: none (port 25), starttls (port 587), ssl_tls (port 465)

# Sender information
SMTP_FROM_EMAIL=noreply@example.com
SMTP_FROM_NAME=Chimera

# SMTP connection timeout in seconds
SMTP_TIMEOUT=30

# Email development mode (set to true to log emails instead of sending)
EMAIL_DEV_MODE=true

# Email URLs (for links in verification/reset emails)
EMAIL_VERIFICATION_URL=http://localhost:3000/verify-email
EMAIL_PASSWORD_RESET_URL=http://localhost:3000/reset-password
EMAIL_FRONTEND_URL=http://localhost:3000

# -----------------------------------------------------------------------------
# Token Expiry Configuration
# -----------------------------------------------------------------------------
# Email verification token expiry in hours (default: 24)
EMAIL_VERIFICATION_TOKEN_EXPIRY_HOURS=24

# Password reset token expiry in hours (default: 1)
PASSWORD_RESET_TOKEN_EXPIRY_HOURS=1

# User invitation token expiry in days (default: 7)
INVITATION_TOKEN_EXPIRY_DAYS=7

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080,http://localhost:8001

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_BURST=20

# Auth-specific rate limits (per IP)
AUTH_RATE_LIMIT_LOGIN_PER_MINUTE=10
AUTH_RATE_LIMIT_REGISTER_PER_MINUTE=5
AUTH_RATE_LIMIT_PASSWORD_RESET_PER_MINUTE=3
AUTH_RATE_LIMIT_RESEND_VERIFICATION_PER_MINUTE=3

# -----------------------------------------------------------------------------
# Redis (for distributed rate limiting, caching, and sessions)
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379/0

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# SQLite (development only - NOT recommended for production)
DATABASE_URL=sqlite:///./chimera.db

# PostgreSQL (recommended for production)
# DATABASE_URL=postgresql://user:password@localhost:5432/chimera

# -----------------------------------------------------------------------------
# Secrets Provider
# -----------------------------------------------------------------------------
SECRETS_PROVIDER=env
SECRETS_CACHE_TTL=300

# -----------------------------------------------------------------------------
# AI Provider API Keys - ADD YOUR KEYS HERE
# -----------------------------------------------------------------------------
# OpenAI
OPENAI_API_KEY=

# Anthropic
ANTHROPIC_API_KEY=

# Google AI
GOOGLE_API_KEY=
GOOGLE_CLOUD_PROJECT=

# DeepSeek
DEEPSEEK_API_KEY=

# Qwen (Alibaba)
QWEN_API_KEY=

# BigModel (ZhiPu AI)
BIGMODEL_API_KEY=

# Routeway AI Gateway
ROUTEWAY_API_KEY=

# Cursor
CURSOR_API_KEY=

# Connection Mode
API_CONNECTION_MODE=direct

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
FEATURE_JAILBREAK_ENABLED=true
FEATURE_BATCH_PROCESSING_ENABLED=true
FEATURE_STREAMING_ENABLED=true

# -----------------------------------------------------------------------------
# User Management Features
# -----------------------------------------------------------------------------
# Require email verification before allowing login
REQUIRE_EMAIL_VERIFICATION=true

# Allow public user registration (set to false for invite-only)
ALLOW_PUBLIC_REGISTRATION=true

# Maximum API keys per user
MAX_API_KEYS_PER_USER=10

# -----------------------------------------------------------------------------
# Monitoring & Observability
# -----------------------------------------------------------------------------
METRICS_ENABLED=true
METRICS_PORT=9090

# -----------------------------------------------------------------------------
# Legacy Backend (during migration)
# -----------------------------------------------------------------------------
LEGACY_BACKEND_URL=http://localhost:8000
LEGACY_BACKEND_ENABLED=false
